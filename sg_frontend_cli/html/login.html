<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iniciar sesión</title>
  <style>
    .center {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 10px;
        margin-top: 10px;
    }

    .fade {
        animation-name: fade;
        animation-duration: 3s;
        animation-iteration-count: infinite;
        animation-fill-mode: forwards;
    }

    .rotate {
        animation-name: rotate;
        animation-duration: 3s;
        animation-iteration-count: infinite;
        animation-timing-function: linear;
    }

    @keyframes fade {
        from {
            opacity: 1;
        }
        to {
            opacity: 0;
        }
    }

    @keyframes rotate {
        from {
            transform: rotateY(0deg);
        }
        to {
            transform: rotateY(180deg);
        }
    }
    /* Estilos para los campos de texto */
    input[type="text"],
    input[type="password"] {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    /* Estilos para los botones */
    input[type="submit"] {
      background-color: #4CAF50;
      color: white;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    /* Estilos para los links */
    a {
      color: #2196F3;
    }

    /* Estilos para el formulario */
    form {
      border-radius: 5px;
      background-color: #f2f2f2;
      padding: 20px;
      width: 50%;
      margin: auto;
      margin-top: 100px;
    }
  </style>
</head>

<body>
    <div class="center fade">
		<img class="rotate" src="/sg_frontend_cli/icons/logo.png" alt="Imagen giratoria">
	</div>
  <form onsubmit="return login(event)">
    <h2>Iniciar sesión</h2>

    <label for="username">Nombre de usuario</label>
    <input type="text" id="username" name="username" required>

    <label for="password">Contraseña</label>
    <input type="password" id="password" name="password" required>

    <input type="submit" value="Iniciar sesión">

    <div>
      ¿No tienes cuenta? <a href="registro.html">Regístrate aquí</a>
    </div>
  </form>

  <script>
    function login(event) {
      event.preventDefault();
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      const request = new XMLHttpRequest();
      request.open("POST", "https://example.com/api/login");
      request.setRequestHeader("Content-Type", "application/json");
      request.onload = function () {
        if (request.status === 200) {
          const token = JSON.parse(request.responseText).token;
          localStorage.setItem("token", token);
          window.location.href = "dashboard.html";
        } else {
          alert("Nombre de usuario o contraseña incorrectos");
        }
      };
      request.send(JSON.stringify({
        username,
        password
      }));
    }
  </script>

</body>

</html>
